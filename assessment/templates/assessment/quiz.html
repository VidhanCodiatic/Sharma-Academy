{% extends "users/base.html" %}
{% load static %}
{% block title %}Quiz{% endblock title %}
{% block main %}

<div class="main container">
    <form action="{% url "show-quiz" assessment.id %}" method="post">
        {% csrf_token %}
        <div class="text-end"> Time left = <span id="timer">{{assessment.duration}}</span></div>
        {% if questions %}
            {% for q in questions %}
                <p>{{ q.question }}</p>
                {% for c in q.choice_set.all %}
                    <input type="radio" name = "q_{{ q.id }}" value="{{ c.id }}">{{ c.option }}<br>
                {% endfor %}
                <br>
            {% endfor %}
            <input type="submit" value="Submit" class="btn btn-primary">
        {% else %}
        <div class="main-form container">
            <h1 id="contain">No Questions Available if you are instructor please add questions first.</h1>
        {% endif %}
        </div>
    </form>

    {% if messages %}
        {% for message in messages %}
        <div class="alert alert-info">
            {{ message }}
        </div>
        {% endfor %}
    {% endif %}
</div>

<script>
    {% comment %} document.getElementById('timer').innerHTML =
  02 + ":" + 11; {% endcomment %}
startTimer();


function startTimer() {
  var presentTime = document.getElementById('timer').innerHTML;
  var timeArray = presentTime.split(/[:]+/);
  var m = timeArray[0];
  var s = checkSecond((timeArray[1] - 1));
  if(s==59){m=m-1}
  if(m<0){
    return
  }
  
  document.getElementById('timer').innerHTML =
    m + ":" + s;
  console.log(m)
  setTimeout(startTimer, 1000);
  
}

function checkSecond(sec) {
  if (sec < 10 && sec >= 0) {sec = "0" + sec}; // add zero in front of numbers < 10
  if (sec < 0) {sec = "59"};
  return sec;
}
</script>

{% endblock main %}

